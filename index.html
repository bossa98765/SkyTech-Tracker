<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkyTech-Tracker</title>
    <link href="https://fonts.googleapis.com/css2?family=Futura&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Futura', sans-serif;
            background-color: #121212;
            color: #ffffff;
            margin: 0;
            padding: 20px;
        }
        h1 {
            text-align: center;
        }
        .tab {
            display: none;
        }
        .active {
            display: block;
        }
        .button {
            background-color: #1e88e5;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            margin: 5px;
        }
        .button:hover {
            background-color: #1565c0;
        }
    </style>
</head>
<body>

    <h1>SkyTech-Tracker</h1>
    <button class="button" onclick="showTab('farms')">Farm List</button>
    <button class="button" onclick="showTab('storage-bots')">Storage Bot List</button>
    <button class="button" onclick="showTab('tracking-bots')">Tracking Bot List</button>

    <div id="farms" class="tab active">
        <h2>Farm List</h2>
        <div id="farmsList"></div>
        <h3>Add Farm</h3>
        <input type="text" id="farmName" placeholder="Farm Name" required>
        <select id="farmStatus">
            <option value="Running">Running</option>
            <option value="Stopped">Stopped</option>
            <option value="Broken">Broken</option>
        </select>
        <input type="text" id="farmInstructions" placeholder="Instructions" required>
        <input type="text" id="farmBotName" placeholder="Bot Name" required>
        <input type="text" id="farmStorageBotName" placeholder="Storage Bot Name" required>
        <input type="text" id="farmLocationOW" placeholder="Location (OW)" required>
        <input type="text" id="farmLocationNE" placeholder="Location (NE)" required>
        <button class="button" onclick="addFarm()">Add Farm</button>
    </div>

    <div id="storage-bots" class="tab">
        <h2>Storage Bot List</h2>
        <div id="storageBotsList"></div>
        <h3>Add Storage Bot</h3>
        <input type="text" id="storageBotName" placeholder="Storage Bot Name" required>
        <input type="text" id="storageContents" placeholder="Contents" required>
        <button class="button" onclick="addStorageBot()">Add Storage Bot</button>
    </div>

    <div id="tracking-bots" class="tab">
        <h2>Tracking Bot List</h2>
        <div id="trackingBotsList"></div>
        <h3>Add Tracking Bot</h3>
        <input type="text" id="trackingBotName" placeholder="Bot Name" required>
        <input type="text" id="trackingPurpose" placeholder="Purpose" required>
        <input type="text" id="trackingLocation" placeholder="Location" required>
        <button class="button" onclick="addTrackingBot()">Add Tracking Bot</button>
    </div>

    <script>
        const API_KEY = 'AIzaSyCPRL5DeCEF4r7RBVO9dwtTUoCcI16ywgs'; // Your API key
        const SHEET_ID = '1DsSl1llA_xpvhBPb0f4QiiGRUPx2ehyclSx0KFwXdqk'; // Your Sheet ID
        const FARM_LIST = 'FarmList'; // Your Farm List sheet name
        const STORAGE_BOT_LIST = 'StorageBotList'; // Your Storage Bot List sheet name
        const TRACKING_BOT_LIST = 'TrackingBotList'; // Your Tracking Bot List sheet name

        function showTab(tabId) {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabId).classList.add('active');
            loadData(tabId);
        }

        function loadData(tabId) {
            if (tabId === 'farms') loadFarms();
            if (tabId === 'storage-bots') loadStorageBots();
            if (tabId === 'tracking-bots') loadTrackingBots();
        }

        function loadFarms() {
            fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${FARM_LIST}?key=${API_KEY}`)
                .then(response => response.json())
                .then(data => {
                    const farms = data.values.slice(1) || []; // Skip header row
                    const farmsDiv = document.getElementById('farmsList');
                    farmsDiv.innerHTML = '';
                    farms.forEach(farm => {
                        const farmItem = document.createElement('div');
                        farmItem.innerHTML = `
                            <h3>${farm[0]}</h3>
                            <p>Status: <span style="color: ${getStatusColor(farm[1])}">${farm[1]}</span></p>
                            <p>Instructions: ${farm[2]}</p>
                            <p>Bot Name: ${farm[3]}</p>
                            <p>Storage Bot Name: ${farm[4]}</p>
                            <p>Location (OW): ${farm[5]}</p>
                            <p>Location (NE): ${farm[6]}</p>
                            <button class="button" onclick="removeFarm('${farm[0]}')">Remove Farm</button>
                        `;
                        farmsDiv.appendChild(farmItem);
                    });
                });
        }

        function loadStorageBots() {
            fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${STORAGE_BOT_LIST}?key=${API_KEY}`)
                .then(response => response.json())
                .then(data => {
                    const storageBots = data.values.slice(1) || []; // Skip header row
                    const storageBotsDiv = document.getElementById('storageBotsList');
                    storageBotsDiv.innerHTML = '';
                    storageBots.forEach(bot => {
                        const botItem = document.createElement('div');
                        botItem.innerHTML = `
                            <h3>${bot[0]}</h3>
                            <p>Contents: ${bot[1]}</p>
                            <button class="button" onclick="removeStorageBot('${bot[0]}')">Remove Storage Bot</button>
                        `;
                        storageBotsDiv.appendChild(botItem);
                    });
                });
        }

        function loadTrackingBots() {
            fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${TRACKING_BOT_LIST}?key=${API_KEY}`)
                .then(response => response.json())
                .then(data => {
                    const trackingBots = data.values.slice(1) || []; // Skip header row
                    const trackingBotsDiv = document.getElementById('trackingBotsList');
                    trackingBotsDiv.innerHTML = '';
                    trackingBots.forEach(bot => {
                        const botItem = document.createElement('div');
                        botItem.innerHTML = `
                            <h3>${bot[0]}</h3>
                            <p>Purpose: ${bot[1]}</p>
                            <p>Location: ${bot[2]}</p>
                            <button class="button" onclick="removeTrackingBot('${bot[0]}')">Remove Tracking Bot</button>
                        `;
                        trackingBotsDiv.appendChild(botItem);
                    });
                });
        }

        function getStatusColor(status) {
            if (status === "Running") return "green";
            if (status === "Stopped") return "red";
            if (status === "Broken") return "yellow";
            return "black"; // Default color
        }

        function addFarm() {
            const farm = {
                farmName: document.getElementById('farmName').value,
                status: document.getElementById('farmStatus').value,
                instructions: document.getElementById('farmInstructions').value,
                botName: document.getElementById('farmBotName').value,
                storageBotName: document.getElementById('farmStorageBotName').value,
                locationOW: document.getElementById('farmLocationOW').value,
                locationNE: document.getElementById('farmLocationNE').value,
            };

            const farmRow = [farm.farmName, farm.status, farm.instructions, farm.botName, farm.storageBotName, farm.locationOW, farm.locationNE];
            fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${FARM_LIST}!A1:G1:append?valueInputOption=RAW&key=${API_KEY}`, {
                method: 'POST',
                body: JSON.stringify({ values: [farmRow] }),
                headers: { 'Content-Type': 'application/json' }
            }).then(() => {
                loadFarms();
                clearFarmInputs();
            }).catch(error => console.error('Error adding farm:', error));
        }

        function clearFarmInputs() {
            document.getElementById('farmName').value = '';
            document.getElementById('farmInstructions').value = '';
            document.getElementById('farmBotName').value = '';
            document.getElementById('farmStorageBotName').value = '';
            document.getElementById('farmLocationOW').value = '';
            document.getElementById('farmLocationNE').value = '';
        }

        function addStorageBot() {
            const storageBot = {
                name: document.getElementById('storageBotName').value,
                contents: document.getElementById('storageContents').value,
            };

            const storageBotRow = [storageBot.name, storageBot.contents];
            fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${STORAGE_BOT_LIST}!A1:B1:append?valueInputOption=RAW&key=${API_KEY}`, {
                method: 'POST',
                body: JSON.stringify({ values: [storageBotRow] }),
                headers: { 'Content-Type': 'application/json' }
            }).then(() => {
                loadStorageBots();
                clearStorageBotInputs();
            }).catch(error => console.error('Error adding storage bot:', error));
        }

        function clearStorageBotInputs() {
            document.getElementById('storageBotName').value = '';
            document.getElementById('storageContents').value = '';
        }

        function addTrackingBot() {
            const trackingBot = {
                name: document.getElementById('trackingBotName').value,
                purpose: document.getElementById('trackingPurpose').value,
                location: document.getElementById('trackingLocation').value,
            };

            const trackingBotRow = [trackingBot.name, trackingBot.purpose, trackingBot.location];
            fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${TRACKING_BOT_LIST}!A1:C1:append?valueInputOption=RAW&key=${API_KEY}`, {
                method: 'POST',
                body: JSON.stringify({ values: [trackingBotRow] }),
                headers: { 'Content-Type': 'application/json' }
            }).then(() => {
                loadTrackingBots();
                clearTrackingBotInputs();
            }).catch(error => console.error('Error adding tracking bot:', error));
        }

        function clearTrackingBotInputs() {
            document.getElementById('trackingBotName').value = '';
            document.getElementById('trackingPurpose').value = '';
            document.getElementById('trackingLocation').value = '';
        }

        function removeFarm(farmName) {
            fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${FARM_LIST}?key=${API_KEY}`)
                .then(response => response.json())
                .then(data => {
                    const rows = data.values;
                    const farmIndex = rows.findIndex(row => row[0] === farmName);
                    if (farmIndex > -1) {
                        const request = {
                            range: `${FARM_LIST}!A${farmIndex + 1}`,
                            majorDimension: 'ROWS',
                            values: [['']]
                        };
                        fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${request.range}:clear?key=${API_KEY}`, {
                            method: 'POST',
                            body: JSON.stringify(request),
                            headers: { 'Content-Type': 'application/json' }
                        }).then(() => loadFarms()).catch(error => console.error('Error removing farm:', error));
                    }
                });
        }

        function removeStorageBot(botName) {
            fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${STORAGE_BOT_LIST}?key=${API_KEY}`)
                .then(response => response.json())
                .then(data => {
                    const rows = data.values;
                    const botIndex = rows.findIndex(row => row[0] === botName);
                    if (botIndex > -1) {
                        const request = {
                            range: `${STORAGE_BOT_LIST}!A${botIndex + 1}`,
                            majorDimension: 'ROWS',
                            values: [['']]
                        };
                        fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${request.range}:clear?key=${API_KEY}`, {
                            method: 'POST',
                            body: JSON.stringify(request),
                            headers: { 'Content-Type': 'application/json' }
                        }).then(() => loadStorageBots()).catch(error => console.error('Error removing storage bot:', error));
                    }
                });
        }

        function removeTrackingBot(botName) {
            fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${TRACKING_BOT_LIST}?key=${API_KEY}`)
                .then(response => response.json())
                .then(data => {
                    const rows = data.values;
                    const botIndex = rows.findIndex(row => row[0] === botName);
                    if (botIndex > -1) {
                        const request = {
                            range: `${TRACKING_BOT_LIST}!A${botIndex + 1}`,
                            majorDimension: 'ROWS',
                            values: [['']]
                        };
                        fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${request.range}:clear?key=${API_KEY}`, {
                            method: 'POST',
                            body: JSON.stringify(request),
                            headers: { 'Content-Type': 'application/json' }
                        }).then(() => loadTrackingBots()).catch(error => console.error('Error removing tracking bot:', error));
                    }
                });
        }
    </script>
</body>
</html>
